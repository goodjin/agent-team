# Project Agent é¡¹ç›®å¼€å‘å®Œæˆæ€»ç»“

## é¡¹ç›®æ¦‚è§ˆ

**Project Agent** æ˜¯ä¸€ä¸ªåŸºäºè§’è‰²çš„å¤šæ™ºèƒ½ä½“é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼Œé€šè¿‡å®šä¹‰ä¸åŒçš„ä¸“å®¶è§’è‰²æ¥è‡ªåŠ¨åŒ–å®Œæˆè½¯ä»¶å¼€å‘çš„å…¨æµç¨‹ã€‚

## å·²å®ŒæˆåŠŸèƒ½

### âœ… æ ¸å¿ƒæ¶æ„

1. **å¤šè§’è‰²ç³»ç»Ÿ**
   - äº§å“ç»ç† (Product Manager)
   - æ¶æ„å¸ˆ (Architect)
   - å¼€å‘è€… (Developer)
   - æµ‹è¯•å·¥ç¨‹å¸ˆ (Tester)
   - æ–‡æ¡£ç¼–å†™è€… (Doc Writer)

2. **ä»»åŠ¡ç®¡ç†å¼•æ“**
   - ä»»åŠ¡åˆ›å»ºã€è°ƒåº¦ã€æ‰§è¡Œ
   - ä¾èµ–å…³ç³»ç®¡ç†
   - å¹¶è¡Œ/ä¸²è¡Œæ‰§è¡Œ
   - çŠ¶æ€è¿½è¸ª
   - å­ä»»åŠ¡æ”¯æŒ

3. **å·¥å…·é“¾ç³»ç»Ÿ**
   - æ–‡ä»¶å·¥å…·ï¼ˆè¯»å†™ã€æœç´¢ã€åˆ é™¤ï¼‰
   - Git å·¥å…·ï¼ˆçŠ¶æ€ã€æäº¤ã€åˆ†æ”¯ã€æ‹‰å–ã€æ¨é€ï¼‰
   - å¯æ‰©å±•å·¥å…·æ³¨å†Œè¡¨

4. **æç¤ºè¯é…ç½®ç³»ç»Ÿ**
   - æ”¯æŒé…ç½®æ–‡ä»¶å’Œç›®å½•
   - è§’è‰²ä¸“å±æç¤ºè¯
   - åœºæ™¯å˜ä½“æ”¯æŒ
   - ä»»åŠ¡æ¨¡æ¿ç³»ç»Ÿ

5. **LLM å¤šæœåŠ¡å•†æ”¯æŒ**
   - **å›½é™…æœåŠ¡å•†**: Anthropic Claude, OpenAI GPT, Azure OpenAI
   - **å›½å†…æœåŠ¡å•†**: é€šä¹‰åƒé—®ã€æ™ºè°± GLMã€MiniMaxã€Kimiã€DeepSeekã€Involer
   - æœ¬åœ°éƒ¨ç½²: Ollama
   - æ•…éšœè½¬ç§»æœºåˆ¶
   - è§’è‰²ä¸“å±é…ç½®
   - **æ™ºèƒ½æœåŠ¡å•†åˆ‡æ¢** (NEW!)
   - **å‹å¥½çš„é”™è¯¯æç¤º** (NEW!)
   - **ç¯å¢ƒå˜é‡è‡ªåŠ¨å±•å¼€** (NEW!)
   - **æœåŠ¡å•†å¯ç”¨/ç¦ç”¨æ§åˆ¶** (NEW!) - é€šè¿‡ `enabled` å­—æ®µæ§åˆ¶å“ªäº›æœåŠ¡å•†å‚ä¸è‡ªåŠ¨åˆ‡æ¢

6. **æ··åˆæ‰§è¡Œæ¨¡å¼** (NEW!)
   - **äº¤äº’å¼æ¨¡å¼** - é€æ­¥ç¡®è®¤ï¼ŒæŸ¥çœ‹è¯¦ç»†ç»“æœ
   - **è‡ªåŠ¨æ¨¡å¼** - å…¨è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€ç¡®è®¤
   - **è¿è¡Œæ—¶åˆ‡æ¢** - è‡ªç”±åˆ‡æ¢æ‰§è¡Œæ¨¡å¼
   - **å®æ—¶è¿›åº¦æ˜¾ç¤º** - æ˜¾ç¤ºæ‰§è¡Œè¿›åº¦å’Œä¸­é—´ç»“æœ
   - **äº¤äº’å¼ä¼šè¯ï¼ˆREPLï¼‰** - å‘½ä»¤è¡Œäº¤äº’ç•Œé¢
   - **å½©è‰²è¾“å‡º** - ç¾åŒ–ç»ˆç«¯è¾“å‡º

7. **è‡ªç”±è¾“å…¥ç³»ç»Ÿ** (NEW!)
   - **è‡ªç„¶è¯­è¨€ç†è§£** - ç›´æ¥æè¿°ä»»åŠ¡ï¼Œç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«
   - **æ™ºèƒ½ä»»åŠ¡åˆ†ç±»** - è‡ªåŠ¨è¯†åˆ« 7 ç§ä»»åŠ¡ç±»å‹
   - **å‘½ä»¤æ”¯æŒ** - æ”¯æŒå¿«æ·å‘½ä»¤ç²¾ç¡®æ§åˆ¶
   - **ä¸­è‹±æ–‡æ··åˆ** - åŒæ—¶æ”¯æŒä¸­è‹±æ–‡è¾“å…¥
   - **ä¸Šä¸‹æ–‡ç†è§£** - æ ¹æ®æè¿°é€‰æ‹©æœ€ä½³æ‰§è¡Œæ–¹å¼

### ğŸ“ é¡¹ç›®ç»“æ„

```
agent-team/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ agent-team.ts # ä¸» Agent ç±»
â”‚   â”‚   â””â”€â”€ task-manager.ts  # ä»»åŠ¡ç®¡ç†å™¨
â”‚   â”œâ”€â”€ roles/               # è§’è‰²å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ base.ts          # åŸºç¡€è§’è‰²ç±»
â”‚   â”‚   â”œâ”€â”€ product-manager.ts
â”‚   â”‚   â”œâ”€â”€ architect.ts
â”‚   â”‚   â”œâ”€â”€ developer.ts
â”‚   â”‚   â”œâ”€â”€ tester.ts
â”‚   â”‚   â”œâ”€â”€ doc-writer.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ tools/               # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ base.ts
â”‚   â”‚   â”œâ”€â”€ file-tools.ts
â”‚   â”‚   â”œâ”€â”€ git-tools.ts
â”‚   â”‚   â”œâ”€â”€ tool-registry.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ services/            # LLM æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ llm.service.ts
â”‚   â”‚   â”œâ”€â”€ llm-config.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ cli/                 # äº¤äº’å¼ CLI (NEW!)
â”‚   â”‚   â”œâ”€â”€ interactive-cli.ts     # äº¤äº’å¼ CLI åŸºç¡€ç±»
â”‚   â”‚   â”œâ”€â”€ interactive-executor.ts # äº¤äº’å¼æ‰§è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ freeform-processor.ts  # è‡ªç”±è¾“å…¥å¤„ç†å™¨ (NEW!)
â”‚   â”‚   â”œâ”€â”€ hybrid-mode.ts          # æ··åˆæ¨¡å¼ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ prompts/             # æç¤ºè¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ loader.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ index.ts            # ä¸»å…¥å£
â”œâ”€â”€ prompts/                 # æç¤ºè¯é…ç½®ç›®å½•
â”‚   â”œâ”€â”€ config.json          # ä¸»é…ç½®
â”‚   â””â”€â”€ roles/               # è§’è‰²æç¤ºè¯
â”‚       â”œâ”€â”€ product-manager.json
â”‚       â”œâ”€â”€ architect.json
â”‚       â”œâ”€â”€ developer.json
â”‚       â”œâ”€â”€ tester.json
â”‚       â””â”€â”€ doc-writer.json
â”œâ”€â”€ examples/                # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ basic-usage.ts
â”‚   â”œâ”€â”€ with-prompts-config.ts
â”‚   â”œâ”€â”€ multi-provider-llm.ts
â”‚   â”œâ”€â”€ workflow-demo.ts
â”‚   â”œâ”€â”€ interactive-mode.ts   # äº¤äº’å¼æ¨¡å¼ç¤ºä¾‹
â”‚   â””â”€â”€ free-input-session.ts # è‡ªç”±è¾“å…¥ä¼šè¯ç¤ºä¾‹ (NEW!)
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â”‚   â”œâ”€â”€ QUICK_START.md
â”‚   â”œâ”€â”€ PROMPTS_GUIDE.md
â”‚   â”œâ”€â”€ LLM_CONFIG_GUIDE.md
â”‚   â”œâ”€â”€ DOMESTIC_LLM_GUIDE.md
â”‚   â”œâ”€â”€ WORKFLOW_GUIDE.md
â”‚   â”œâ”€â”€ RETRY_GUIDE.md        # é”™è¯¯å¤„ç†æŒ‡å—
â”‚   â”œâ”€â”€ PROVIDER_ENABLE_GUIDE.md  # æœåŠ¡å•†å¯ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ INTERACTIVE_MODE_GUIDE.md # äº¤äº’å¼æ¨¡å¼æŒ‡å—
â”‚   â””â”€â”€ FREE_INPUT_GUIDE.md   # è‡ªç”±è¾“å…¥æŒ‡å— (NEW!)
â”œâ”€â”€ llm.config.json         # LLM é…ç½®
â”œâ”€â”€ .env.example
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## æ ¸å¿ƒç‰¹æ€§

### 1. å¤šè§’è‰²ç³»ç»Ÿ

æ¯ä¸ªè§’è‰²éƒ½æœ‰ï¼š
- ç‹¬ç«‹çš„ç³»ç»Ÿæç¤ºè¯
- ä¸“å±çš„ä»»åŠ¡å¤„ç†é€»è¾‘
- å¯é…ç½®çš„æ¸©åº¦å’Œ token é™åˆ¶
- æ”¯æŒåœºæ™¯å˜ä½“

### 2. å¤šæœåŠ¡å•†æ”¯æŒ

**å›½é™…æœåŠ¡å•†**ï¼ˆ4ä¸ªï¼‰ï¼š
- Anthropic Claude (Opus, Sonnet, Haiku)
- OpenAI GPT (GPT-4, GPT-3.5)
- Azure OpenAI
- Ollama (æœ¬åœ°)

**å›½å†…æœåŠ¡å•†**ï¼ˆ6ä¸ªï¼‰ï¼š
- é€šä¹‰åƒé—® Qwen (Max, Plus, Turbo, Long)
- æ™ºè°± GLM (GLM-4, Plus, Air, Flash, Turbo)
- MiniMax (ABAB6.5s, ABAB6.5, ABAB5.5)
- Kimi æœˆä¹‹æš—é¢ (128k, 32k, 8k)
- DeepSeek (Chat, Coder)
- Involer è‹±ç  (Lite, Pro)

### 3. çµæ´»é…ç½®

#### æç¤ºè¯é…ç½®
- å•æ–‡ä»¶é…ç½® (`prompts.json`)
- ç›®å½•é…ç½® (`prompts/roles/*.json`)
- Markdown æ–‡ä»¶ (`prompts/*.md`)

#### LLM é…ç½®
- å•ä¸ªé…ç½®æ–‡ä»¶ (`llm.config.json`)
- æ”¯æŒç¯å¢ƒå˜é‡
- æœåŠ¡å•†çº§åˆ«é…ç½®
- è§’è‰²ä¸“å±é…ç½®
- æ•…éšœè½¬ç§»é¡ºåº

### 4. å·¥ä½œæµå¼•æ“

```typescript
agent.registerWorkflow({
  id: 'feature-development',
  steps: [
    { id: 'analyze', role: 'product-manager', taskType: 'requirement-analysis' },
    { id: 'design', role: 'architect', taskType: 'architecture-design', dependencies: ['analyze'] },
    { id: 'develop', role: 'developer', taskType: 'development', dependencies: ['design'] },
    { id: 'test', role: 'tester', taskType: 'testing', dependencies: ['develop'] },
    { id: 'document', role: 'doc-writer', taskType: 'documentation', dependencies: ['test'] },
  ],
});

await agent.executeWorkflow('feature-development');
```

### 5. é«˜çº§ API

```typescript
// å®Œæ•´åŠŸèƒ½å¼€å‘ï¼ˆä¸€ç«™å¼ï¼‰
await agent.developFeature({
  title: 'å®ç°ç”¨æˆ·è®¤è¯',
  requirements: ['é‚®ç®±ç™»å½•', 'JWT token'],
});

// å•ä»»åŠ¡æ‰§è¡Œ
await agent.execute({
  type: 'development',
  title: 'å¼€å‘åŠŸèƒ½',
  assignedRole: 'developer',
});

// å·¥ä½œæµæ‰§è¡Œ
await agent.executeWorkflow('workflow-id');

// ç›´æ¥ä½¿ç”¨å·¥å…·
await agent.useTool('read-file', { filePath: './src/index.ts' });
await agent.useTool('git-commit', { message: 'feat: xxx' });
```

## é…ç½®ç¤ºä¾‹

### ç¯å¢ƒå˜é‡è®¾ç½®

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ·»åŠ  API Keyï¼š

```env
# å›½é™…æœåŠ¡å•†
ANTHROPIC_API_KEY=sk-ant-xxxxx
OPENAI_API_KEY=sk-xxxxx

# å›½å†…æœåŠ¡å•†
DASHSCOPE_API_KEY=sk-xxxxx
ZHIPU_API_KEY=xxxxx
MINIMAX_API_KEY=xxxxx
MOONSHOT_API_KEY=xxxxx
DEEPSEEK_API_KEY=xxxxx
```

### åŸºæœ¬ä½¿ç”¨

```typescript
import { ProjectAgent } from 'agent-team';

const agent = new ProjectAgent(
  {
    projectName: 'my-app',
    projectPath: '/path/to/project',
    llmConfig: {
      provider: 'anthropic',
      apiKey: process.env.ANTHROPIC_API_KEY,
      model: 'claude-3-opus-20240229',
    },
  },
  {
    prompts: './prompts',
    llm: './llm.config.json',
  }
);

await agent.loadConfig();

// æ‰§è¡Œä»»åŠ¡
const result = await agent.developFeature({
  title: 'å®ç°ç”¨æˆ·è®¤è¯',
  requirements: ['é‚®ç®±å¯†ç ç™»å½•', 'JWT token'],
});
```

## æˆæœ¬ä¼˜åŒ–å»ºè®®

| è§’è‰² | æ¨èæ¨¡å‹ | åŸå›  |
|------|----------|------|
| æ¶æ„å¸ˆ | Claude 3 Opus / GLM-4 / Qwen Max | æœ€å¼ºæ¨ç†èƒ½åŠ› |
| å¼€å‘è€… | Claude 3 Sonnet / DeepSeek Coder | å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | GPT-3.5 / GLM-4 Flash | å¿«é€Ÿã€é«˜å¹¶å‘ |
| äº§å“ç»ç† | Kimi 128k / Qwen Long | é•¿æ–‡æ¡£åˆ†æ |
| æ–‡æ¡£ç¼–å†™è€… | Claude 3 Haiku / Qwen Turbo | ç®€å•ä»»åŠ¡ï¼Œæˆæœ¬ä½ |

## å·²æœ‰æ–‡æ¡£

- [README.md](README.md) - é¡¹ç›®ä»‹ç»
- [docs/QUICK_START.md](docs/QUICK_START.md) - å¿«é€Ÿå…¥é—¨
- [docs/PROMPTS_GUIDE.md](docs/PROMPTS_GUIDE.md) - æç¤ºè¯é…ç½®
- [docs/LLM_CONFIG_GUIDE.md](docs/LLM_CONFIG_GUIDE.md) - LLM é…ç½®æŒ‡å—
- [docs/DOMESTIC_LLM_GUIDE.md](docs/DOMESTIC_LLM_GUIDE.md) - å›½å†…æœåŠ¡å•†æŒ‡å—
- [docs/WORKFLOW_GUIDE.md](docs/WORKFLOW_GUIDE.md) - å·¥ä½œæµç¨‹è¯¦è§£
- [docs/RETRY_GUIDE.md](docs/RETRY_GUIDE.md) - é…ç½®é”™è¯¯å¤„ç†æŒ‡å—
- [docs/PROVIDER_ENABLE_GUIDE.md](docs/PROVIDER_ENABLE_GUIDE.md) - æœåŠ¡å•†å¯ç”¨/ç¦ç”¨æŒ‡å—
- [docs/INTERACTIVE_MODE_GUIDE.md](docs/INTERACTIVE_MODE_GUIDE.md) - äº¤äº’å¼æ¨¡å¼æŒ‡å— (NEW!)

## ä½¿ç”¨æ–¹å¼

### è‡ªåŠ¨æ¨¡å¼ï¼ˆæ‰¹å¤„ç†ï¼‰

```typescript
import { ProjectAgent } from 'agent-team';

const agent = new ProjectAgent(config, { llm: './llm.config.json' });
await agent.loadConfig();

// è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€ç¡®è®¤
await agent.developFeature({
  title: 'å®ç°ç”¨æˆ·è®¤è¯',
  requirements: ['é‚®ç®±å¯†ç ç™»å½•', 'JWT token'],
});
```

### äº¤äº’å¼æ¨¡å¼ï¼ˆé€æ­¥ç¡®è®¤ï¼‰

```typescript
import { createHybridModeManager, ExecutionMode } from 'agent-team';

const hybrid = createHybridModeManager(agent, {
  mode: ExecutionMode.INTERACTIVE, // äº¤äº’å¼
  showProgress: true,
});

// é€æ­¥ç¡®è®¤ï¼Œæ˜¾ç¤ºè¯¦ç»†ç»“æœ
await hybrid.developFeature({});
```

### äº¤äº’å¼ä¼šè¯ï¼ˆREPLï¼‰

```bash
npm run interactive:session
```

å¯ç”¨å‘½ä»¤ï¼š
- `feature` - å¼€å‘æ–°åŠŸèƒ½
- `task` - æ‰§è¡Œä»»åŠ¡
- `mode` - åˆ‡æ¢æ‰§è¡Œæ¨¡å¼
- `stats` - æŸ¥çœ‹ç»Ÿè®¡
- `help` - æ˜¾ç¤ºå¸®åŠ©

## è¿è¡Œç»“æœ

âœ… **é¡¹ç›®ç»“æ„å®Œæ•´** - æ‰€æœ‰æ ¸å¿ƒæ¨¡å—å·²å®ç°
âœ… **é…ç½®æ–‡ä»¶é½å…¨** - LLM å’Œæç¤ºè¯é…ç½®å®Œæ•´
âœ… **å¤šæœåŠ¡å•†æ”¯æŒ** - 11+ æœåŠ¡å•†ï¼Œ60+ æ¨¡å‹é…ç½®
âœ… **æ–‡æ¡£å®Œå–„** - 6 ç¯‡è¯¦ç»†æ–‡æ¡£
âœ… **ç¤ºä¾‹ä¸°å¯Œ** - 4 ä¸ªä½¿ç”¨ç¤ºä¾‹
âœ… **æ¼”ç¤ºæˆåŠŸ** - åŠŸèƒ½æ­£å¸¸è¿è¡Œ

## ä¸‹ä¸€æ­¥ä½¿ç”¨

1. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

2. **é…ç½®ç¯å¢ƒ**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ·»åŠ  API Key
   ```

3. **æ„å»ºé¡¹ç›®**
   ```bash
   npm run build
   ```

4. **è¿è¡Œç¤ºä¾‹**
   ```bash
   # æŸ¥çœ‹åŠŸèƒ½æ¼”ç¤º
   npx tsx demo.ts

   # è¿è¡ŒåŸºç¡€ç¤ºä¾‹ï¼ˆéœ€è¦ API Keyï¼‰
   npm run example
   ```

5. **å¼€å§‹ä½¿ç”¨**
   ```typescript
   import { ProjectAgent } from 'agent-team';

   const agent = new ProjectAgent(config, {
     prompts: './prompts',
     llm: './llm.config.json',
   });

   await agent.loadConfig();
   await agent.developFeature({ ... });
   ```

Project Agent å·²å®Œæˆå¼€å‘ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨ï¼ğŸ‰
