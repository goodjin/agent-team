# Project Agent UI 设计文档

## 1. 设计原则

### 1.1 核心设计理念
- **指挥中心视角**：UI 作为"私人智能体指挥中心"，提供全局视野和精细控制
- **操作即时反馈**：所有操作都有明确的状态反馈
- **信息层次清晰**：核心信息突出，次要信息可展开
- **单用户无障碍**：无需登录，所有功能一览无余

### 1.2 设计原则
| 原则 | 说明 |
|-----|------|
| **简洁优先** | 避免信息过载，渐进式展示 |
| **一致性** | 统一的交互模式和视觉语言 |
| **高效操作** | 键盘快捷键、批量操作、右键菜单 |
| **可访问性** | 支持深色模式、响应式布局 |

## 2. 整体布局

### 2.1 布局结构
```
┌─────────────────────────────────────────────────────────┐
│  Logo  │  导航栏 (Nav)      │  项目切换  │  用户设置    │
├────────┼────────────────────┼────────────┼─────────────┤
│        │                    │            │             │
│  侧边栏 │                    │   主内容区 │             │
│  导航  │                    │   (Main)   │             │
│        │                    │            │             │
│        │                    │            │             │
├────────┴────────────────────┴────────────┴─────────────┤
│  状态栏: 运行状态 | 智能体数 | Token使用 | 系统健康度   │
└─────────────────────────────────────────────────────────┘
```

### 2.2 侧边栏导航
```
├── 仪表板 (Dashboard)
├── 项目管理 (Projects)
│   ├── [项目列表]
│   └── [当前项目详情]
├── 任务中心 (Tasks)
│   ├── 全部任务
│   ├── 进行中
│   ├── 已完成
│   └── 失败重试
├── 智能体 (Agents)
│   ├── 运行中的智能体
│   └── 智能体配置
├── 工作流 (Workflows)
│   ├── 模板库
│   └── 自定义工作流
├── 工具箱 (Tools)
│   ├── 已安装工具
│   └── 工具配置
├── 分析报告 (Reports)
│   ├── 进度报告
│   ├── 资源使用
│   └── 历史记录
└── 系统设置 (Settings)
    ├── LLM 配置
    ├── 规则配置
    └── 数据管理
```

## 3. 页面设计

### 3.1 仪表板 (Dashboard)

**页面目标**：系统全局概览，一眼掌握核心状态

**布局区域**：

```
┌──────────────────────────────────────────────────────────┐
│  系统状态卡片                          智能体运行状态    │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │
│  │ 🟢 在线     │  │ 🚀 5 运行中 │  │  智能体实时状态  │ │
│  │ 内存 45%   │  │ 💤 2 空闲   │  │  ┌───┬───┬───┐  │ │
│  │ CPU 23%    │  │ ⚠️ 1 异常   │  │  │PM │DEV│TST│  │ │
│  └─────────────┘  └─────────────┘  │  └───┴───┴───┘  │ │
│                                     └─────────────────┘ │
├──────────────────────────────────────────────────────────┤
│  任务进度追踪                          最近活动         │
│  ┌─────────────────────────────────┐  ┌──────────────┐ │
│  │  ████████████████░░░░  68%     │  │ ✓ 任务完成   │ │
│  │  本周完成 24/35 任务            │  │ ✗ 构建失败   │ │
│  │  ├─ 开发中 (8)                  │  │ → 新任务创建 │ │
│  │  ├─ 测试中 (3)                  │  │ ⚡ 智能体恢复 │ │
│  │  └─ 等待中 (0)                  │  └──────────────┘ │
│  └─────────────────────────────────┘                   │
├──────────────────────────────────────────────────────────┤
│  资源使用趋势                          快捷操作         │
│  ┌────────────────────────────┐      ┌───────────────┐ │
│  │  Token 消耗图表 (日/周/月)  │      │ [+ 新任务]    │ │
│  │  📈 📈 📈 📈 📈 📈 📈      │      │ [▶ 启动智能体]│ │
│  │                             │      │ [📊 生成报告] │ │
│  └────────────────────────────┘      └───────────────┘ │
└──────────────────────────────────────────────────────────┘
```

**核心指标卡片**：
| 卡片 | 指标 | 交互 |
|-----|------|------|
| 系统状态 | 在线/离线、内存、CPU | 点击展开详情 |
| 任务进度 | 完成率、进行中、失败 | 点击跳转任务列表 |
| 智能体状态 | 运行数、空闲数、异常 | 点击跳转智能体管理 |
| Token 使用 | 日/周/月消耗 | 点击展开使用明细 |

### 3.2 任务中心 (Task Center)

**页面目标**：任务的全生命周期管理

**布局**：

```
┌─────────────────────────────────────────────────────────────┐
│  筛选器: [全部 ▼] [状态 ▼] [优先级 ▼] [角色 ▼]  [+ 新任务]  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  任务列表 (表格视图)                                        │
│  ┌────┬────────────┬────────┬───────┬──────┬────────────┐ │
│  │ ID │ 任务名称   │ 状态   │ 角色  │ 优先级│ 操作       │ │
│  ├────┼────────────┼────────┼───────┼──────┼────────────┤ │
│  │ 23 │ 用户登录   │ 🟡进行中│ 开发者│  高   │ [详情][暂停]│ │
│  │ 22 │ API设计    │ 🟢完成 │ 架构师│  中   │ [详情]     │ │
│  │ 21 │ 单元测试   │ 🔴失败 │ 测试  │  高   │ [详情][重试]│ │
│  │ 20 │ 文档编写   │ ⬜等待 │ 文档  │  低   │ [详情]     │ │
│  └────┴────────────┴────────┴───────┴──────┴────────────┘ │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  [卡片视图切换] [批量操作 ▼]                               │
└─────────────────────────────────────────────────────────────┘
```

**任务详情面板（侧边展开）**：

```
  任务详情 - 用户登录功能实现
  ─────────────────────────────────
  
  基本信息
  ─────────────────────────────────
  状态: 🟡 进行中
  优先级: 🔴 高
  分配给: 开发者 (Agent-Dev-001)
  创建时间: 2024-01-31 14:30
  截止时间: 2024-02-01 18:00
  
  进度追踪
  ─────────────────────────────────
  ████████░░░░░░░░░░░░  4/12 步骤
  
  子任务列表:
  ├─ ✓ 数据库表设计
  ├─ ✓ API 接口定义
  ├─ 🔄 用户登录接口
  ├─ ⬜ Token 刷新接口
  └─ ⬜ 密码加密
  
  对话历史 (可折叠)
  ─────────────────────────────────
  [AI] 正在分析需求...
  [AI] 开始实现用户登录功能
  [AI] 已完成数据库表设计
  [AI] 正在实现登录接口...
  
  工具调用记录 (可折叠)
  ─────────────────────────────────
  [read-file] src/models/user.ts
  [write-file] src/controllers/auth.ts
  [code-analysis] src/middleware/auth.ts
  
  操作按钮
  ─────────────────────────────────
  [暂停任务] [取消任务] [编辑任务] [分配给...]
  ─────────────────────────────────
```

### 3.3 智能体管理 (Agent Management)

**页面目标**：管理和监控所有智能体

**布局**：

```
┌─────────────────────────────────────────────────────────────┐
│  智能体总览                              [+ 创建智能体]    │
│  运行中: 5    空闲: 2    异常: 1    总数: 8               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  智能体卡片列表                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────┐ │
│  │ PM-Agent-001    │  │ DEV-Agent-002   │  │ TST-Agent-01│ │
│  │ 🟢 运行中       │  │ 🟡 思考中       │  │ 🟢 运行中   │ │
│  │ ─────────────   │  │ ─────────────   │  │ ─────────────│ │
│  │ 当前任务: 3     │  │ 当前任务: 8     │  │ 当前任务: 1  │ │
│  │ 今日完成: 12    │  │ 今日完成: 5     │  │ 今日完成: 3  │ │
│  │ Token消耗: 45K  │  │ Token消耗: 128K │  │ Token消耗: 12K│ │
│  │ ─────────────   │  │ ─────────────   │  │ ─────────────│ │
│  │ 💬 任务对话     │  │ 💬 任务对话     │  │ 💬 任务对话  │ │
│  │ 📊 详细统计     │  │ 📊 详细统计     │  │ 📊 详细统计  │ │
│  │ ⚙️ 设置         │  │ ⚙️ 设置         │  │ ⚙️ 设置     │ │
│  │ ⏸️ 暂停         │  │ ⏸️ 暂停         │  │ ⏸️ 暂停     │ │
│  └─────────────────┘  └─────────────────┘  └─────────────┘ │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  智能体配置面板 (点击卡片展开)                              │
└─────────────────────────────────────────────────────────────┘
```

**智能体配置面板**：

```
智能体配置 - DEV-Agent-002
────────────────────────────────

基本信息
────────────────────────────────
名称: DEV-Agent-002
关联角色: 开发者 (Developer)
所属项目: my-ecommerce-project
LLM 提供商: Anthropic / Claude-3.5-Sonnet

运行时配置
────────────────────────────────
最大迭代次数: [10      ]
最大历史消息: [50      ]
自动确认工具: [☑️]
显示思考过程: [☐]
显示 Token 使用: [☑️]

高级配置
────────────────────────────────
系统提示词: [编辑]
工具白名单: [配置]
规则集: [选择]

统计信息
────────────────────────────────
总任务数: 45
已完成: 38
失败: 2
取消: 5
Token 消耗: 1,256,000

操作按钮
────────────────────────────────
[重启智能体] [清空历史] [导出配置] [删除智能体]
```

### 3.4 工作流设计器 (Workflow Designer)

**页面目标**：可视化的流程设计和管理

**布局**：

```
┌─────────────────────────────────────────────────────────────┐
│  工作流列表         工作流画布                    [保存]   │
│  ┌───────────┐    ┌─────────────────────────────────────┐ │
│  │ 功能开发   │    │                                     │ │
│  │ Bug修复   │    │      [PM]                           │ │
│  │ 代码重构   │    │        │                            │ │
│  │ 自定义     │    │        ▼                            │ │
│  │ ─────────  │    │   [ARCH]                           │ │
│  │ [+新建]   │    │        │                            │ │
│  │           │    │   ┌────▼────┐                        │ │
│  │           │    │   │  TASK  │                        │ │
│  │           │    │   │ SPLIT  │                        │ │
│  │           │    │   └────┬────┘                        │ │
│  │           │    │        │                             │ │
│  │           │    │   ┌────┼────┐                        │ │
│  │           │    │   ▼    ▼    ▼                        │ │
│  │           │    │ [DEV][TST][DOC]                      │ │
│  │           │    │   │    │    │                        │ │
│  │           │    │   └───┬┴─┬──┘                        │ │
│  │           │    │       ▼                             │ │
│  │           │    │    [MERGE]                           │ │
│  │           │    │       │                             │ │
│  │           │    │       ▼                             │ │
│  │           │    │    [DONE]                           │ │
│  └───────────┘    └─────────────────────────────────────┘ │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  步骤属性面板 (选中节点时显示)                              │
└─────────────────────────────────────────────────────────────┘
```

**步骤节点属性**：

```
步骤属性 - 开发实现 (DEV)
────────────────────────────────
基本属性
────────────────────────────────
名称: 开发实现
类型: 任务步骤
分配角色: 开发者
任务类型: development

执行配置
────────────────────────────────
超时时间: [60    ] 分钟
重试次数: [2    ]
重试间隔: [5    ] 分钟

条件配置
────────────────────────────────
执行条件: ${previousStep.status === 'completed'}

依赖步骤: [架构设计 (ARCH)]
────────────────────────────────
```

### 3.5 项目管理 (Project Management)

**页面目标**：多项目切换和管理

**布局**：

```
┌─────────────────────────────────────────────────────────────┐
│  项目卡片视图                 切换当前项目: [my-ecommerce ▼] │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────┐ │
│  │ 🟢 项目 A       │  │ 🟡 项目 B       │  │ ⚪ 项目 C   │ │
│  │ ─────────────   │  │ ─────────────   │  │ ─────────── │ │
│  │ 任务: 12/45     │  │ 任务: 3/8       │  │ 归档       │ │
│  │ 智能体: 4       │  │ 智能体: 2       │  │ 任务: 28/28│ │
│  │ 最后活动: 2h前  │  │ 最后活动: 5m前  │  │ 最后活动: 3d│ │
│  │                 │  │ ⚠️ 1 任务失败   │  │             │ │
│  │ [进入] [设置]   │  │ [进入] [设置]   │  │ [恢复] [删] │ │
│  └─────────────────┘  └─────────────────┘  └─────────────┘ │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  项目详情面板 (点击项目卡片展开)                            │
└─────────────────────────────────────────────────────────────┘
```

### 3.6 分析报告 (Reports)

**页面目标**：数据分析和报告

**布局**：

```
┌─────────────────────────────────────────────────────────────┐
│  报告类型: [进度报告 ▼]  时间范围: [本周 ▼]  [导出]        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────┐  ┌─────────────────────┐          │
│  │ Token 消耗趋势      │  │ 任务完成率          │          │
│  │  ┌────────────────┐ │  │  ┌────────────────┐ │          │
│  │  │ 📈 上升 23%    │ │  │  │ ████████░░ 84% │ │          │
│  │  └────────────────┘ │  │  └────────────────┘ │          │
│  │  日均: 156K Token   │  │  完成: 156 失败: 30 │          │
│  │  日均: 156K Token   │  │                     │          │
│  └─────────────────────┘  └─────────────────────┘          │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 智能体性能排名                                      │   │
│  │  ┌────────────────────────────────────────────────┐ │   │
│  │  │ 排名 │ 智能体   │ 任务数 │ Token/任务 │ 成功率│ │   │
│  │  ├────────────────────────────────────────────────┤ │   │
│  │  │  1   │ DEV-001  │   45   │   2.8K     │  95%  │ │   │
│  │  │  2   │ PM-001   │   32   │   1.2K     │  100% │ │   │
│  │  │  3   │ TST-001  │   28   │   3.5K     │  89%  │ │   │
│  │  └────────────────────────────────────────────────┘ │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## 4. 组件规范

### 4.1 按钮组件
| 类型 | 样式 | 使用场景 |
|-----|------|---------|
| 主要按钮 | 蓝色填充 | 确认操作、新建任务 |
| 次要按钮 | 灰色边框 | 取消、返回 |
| 危险按钮 | 红色填充 | 删除、终止 |
| 文字按钮 | 无背景 | 详情、设置 |

### 4.2 状态标签
| 状态 | 颜色 | 图标 | 说明 |
|-----|------|-----|------|
| 进行中 | 黄色 | 🟡 | 任务执行中 |
| 已完成 | 绿色 | 🟢 | 成功完成 |
| 失败 | 红色 | 🔴 | 执行失败 |
| 等待 | 灰色 | ⬜ | 等待执行 |
| 阻塞 | 橙色 | 🟠 | 被阻塞 |

### 4.3 进度条
```typescript
// 进度条组件
interface ProgressBar {
  value: number;      // 0-100
  showLabel: boolean; // 显示百分比
  color: 'blue' | 'green' | 'yellow' | 'red';
  size: 'small' | 'medium' | 'large';
}
```

### 4.4 图表组件
| 图表类型 | 使用场景 |
|---------|---------|
| 折线图 | Token 消耗趋势、时间序列 |
| 饼图 | 任务状态分布、角色工作量 |
| 柱状图 | 智能体性能对比 |
| 面积图 | 资源使用趋势 |

## 5. 交互规范

### 5.1 键盘快捷键
| 快捷键 | 功能 |
|-------|------|
| `Ctrl/Cmd + N` | 新建任务 |
| `Ctrl/Cmd + /` | 显示所有快捷键 |
| `Esc` | 关闭模态框 |
| `←/→` | 导航切换 |
| `Ctrl/Cmd + S` | 保存配置 |

### 5.2 右键菜单
| 上下文 | 菜单项 |
|-------|-------|
| 任务卡片 | 查看详情、编辑、暂停、重试、删除 |
| 智能体卡片 | 查看详情、重启、清空历史、设置 |
| 项目卡片 | 进入项目、设置、归档、删除 |

### 5.3 加载状态
- 按钮加载中显示 spinner
- 页面加载显示骨架屏
- 数据加载显示 loading spinner
- 操作成功显示 toast 通知

## 6. 响应式设计

### 6.1 断点定义
| 断点 | 屏幕宽度 | 布局变化 |
|-----|---------|---------|
| xs | < 576px | 单列布局 |
| sm | 576px - 768px | 双列布局 |
| md | 768px - 1024px | 三列布局 |
| lg | 1024px - 1440px | 完整布局 |
| xl | > 1440px | 宽屏优化 |

### 6.2 深色模式
- 系统自动检测 OS 设置
- 支持手动切换
- 所有组件适配深色主题
- 颜色对比度 ≥ 4.5:1

## 7. 通知系统

### 7.1 通知类型
| 类型 | 图标 | 声音 | 使用场景 |
|-----|------|-----|---------|
| 成功 | ✓ | 可选 | 操作成功 |
| 错误 | ✗ | 可选 | 操作失败 |
| 警告 | ⚠ | 可选 | 需要注意 |
| 信息 | ℹ | 无 | 一般通知 |
| 进度 | ⏳ | 无 | 长时间任务 |

### 7.2 通知位置
- 页面顶部 Toast
- 通知中心（侧边栏图标）
- Web 浏览器通知（可选）

---

**文档版本**：1.0.0
**最后更新**：2025-01-31
**维护者**：Project Agent Team
